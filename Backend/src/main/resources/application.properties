# =============================================================================
# APPLICATION PROPERTIES
# =============================================================================
spring.application.name=Satellite_Platform_Application
spring.config.import=optional:configserver:${CONFIG_SERVER_URL}
spring.cloud.config.enabled=false
spring.main.allow-bean-definition-overriding=true
project.base.path=${PROJECT_BASE_PATH}

# =============================================================================
# DATA PERSISTENCE CONFIGURATION
# =============================================================================
# --- MongoDB Configuration ---
spring.data.mongodb.uri=${MONGO_URI}
spring.data.mongodb.auto-index-creation=true
logging.level.org.springframework.data.mongodb=DEBUG

# --- Redis Configuration ---
spring.data.redis.url=${REDIS_URL}

# --- MySQL Configuration (Commented Out) ---
# spring.datasource.url=jdbc:mysql://localhost:3307/satellitedb?createDatabaseIfNotExist=true
# spring.datasource.username=root
# spring.datasource.password=11444592
# spring.jpa.hibernate.ddl-auto=update
# spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQLDialect
# spring.jpa.show-sql=true
# spring.jpa.properties.hibernate.format_sql=true

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# --- JWT Configuration ---
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION}

# --- Initial Admin User Configuration ---
app.initial.admin.enabled=${ADMIN_ENABLED}
app.initial.admin.username=${ADMIN_USERNAME}
app.initial.admin.email=${ADMIN_EMAIL}
app.initial.admin.password=${ADMIN_PASSWORD}

# =============================================================================
# IMAGE PROCESSING CONFIGURATION
# =============================================================================
python.backend.url=${PYTHON_BASE_URL}
storage.filesystem.directory=${IMAGE_STORAGE_PATH}
thread.pool.size=4

# --- Analysis Types ---
analysis.valid_types=ndvi,evi,water-bodies,change-detection,land-cover,slope,aspect,get_images

# =============================================================================
# FILE UPLOAD & STORAGE CONFIGURATION
# =============================================================================
# --- File Upload Configuration ---
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
spring.codec.max-in-memory-size=10MB
spring.webflux.max-in-memory-size=10MB
web_client.memory.buffer.size=52428800

# --- Temporary File Storage Configuration ---
storage.temporary.redis-prefix=tmpfile:
storage.temporary.filesystem-path=${TEMP_STORAGE_PATH:tmp}
storage.temporary.inactivity-duration=24h
storage.temporary.post-access-duration=1h
storage.temporary.cleanup-cron=0 0/30 * * * ?

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
cache.redis.ttl_seconds=604800
cache.redis.prefix=cache:data:
cache.redis.max_infrequent_access_count=3
cache.redis.inactivity_threshold_days=2
cache.cleanup.cron=0 0 3 * * ?

# =============================================================================
# API MANAGEMENT CONFIGURATION
# =============================================================================
# --- Rate Limiting ---
rate_limit.max_requests=10000
rate_limit.time_window_millis=6000000000
rate-limit.cleanup-interval=300000000

# --- Documentation ---
springdoc.swagger-ui.path=/swagger-ui.html

# =============================================================================
# MONITORING & LOGGING CONFIGURATION
# =============================================================================
logging.level.org.springframework=DEBUG
audit.log.path=/logs

# --- Spring Boot Actuator Configuration ---
management.endpoints.web.exposure.include=health,metrics,prometheus
management.endpoint.health.show-details=WHEN_AUTHORIZED
management.endpoint.metrics.enabled=true
management.endpoint.prometheus.enabled=true
management.metrics.tags.application=${spring.application.name}

# =============================================================================
# MESSAGING CONFIGURATION
# =============================================================================
# --- RabbitMQ Configuration ---
spring.rabbitmq.host=${RABBITMQ_HOST}
spring.rabbitmq.port=${RABBITMQ_PORT}
spring.rabbitmq.username=${RABBITMQ_USER}
spring.rabbitmq.password=${RABBITMQ_PASS}

messaging.cleanup.enabled=true
messaging.rabbitmq.enabled=false
messaging.user-to-admin.enabled=true
messaging.user-to-bot.enabled=true
messaging.user-to-user.enabled=true
messaging.queue.dlx.enabled=true
messaging.retry.max-attempts=3
messaging.retry.initial-interval=1000
messaging.retry.multiplier=2.0
messaging.attachments.max.size=10
messaging.attachments.allowed.types=jpg,jpeg,png,pdf,doc,docx,txt

# =============================================================================
# EXTERNAL COMMUNICATIONS CONFIGURATION
# =============================================================================
# --- External App Communication Configuration ---
external.app.endpoints.image_processor=${APP1_URL}
# external.app.endpoints.app1=${APP1_URL}
# external.app.endpoints.app2=${APP2_URL}

# --- Communication Types ---
communication.type=rest,grpc,mq
communication.file.size.threshold=10485760

# --- gRPC Client Configuration ---
grpc.client.address=localhost
grpc.client.port=50051
grpc.client.max-message_size_mb=100
grpc.client.use_transport_security=false
grpc.client.shutdown_timeout_seconds=5

# =============================================================================
# CONDUCTOR WORKFLOW CONFIGURATION
# =============================================================================
conductor.server.url=http://localhost:8080/api
conductor.client.threadCount=10
conductor.client.sleepWhenRetry=500
conductor.client.updateRetryCount=3
conductor.client.workerNamePrefix=satellite-platform
